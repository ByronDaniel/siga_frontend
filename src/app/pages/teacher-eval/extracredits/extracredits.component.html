<p-dialog header="Creditos Extra" [(visible)]="displayModal" [modal]="true" [style]="{width: '40vw'}"
  [baseZIndex]="10000" [draggable]="false">
  
  <div class="p-fluid p-formgrid p-grid">
    <div class="p-field p-col-12 p-md-12">
      <label for="state">Docentes</label>
      <p-dropdown inputId="state" [options]="teachers" [(ngModel)]="teacher" placeholder="Docentes" optionLabel="name">
      </p-dropdown>
      <small *ngIf="(teacher == null ) " class="p-error">Campo Requerido.</small>
    </div>
    <form [formGroup]="credits" >
      <div class="p-fluid p-formgrid p-grid">
       
    <div class="p-field p-col-12 p-md-6">
      <label>DIPLOMA YAVIRAC (3)</label>
      <input type="number" class="p-invalid" formControlName="diploma_yavirac" placeholder="Del 0 a 3 puntos" pInputText>
     
      <small *ngIf="(credits.get('diploma_yavirac').value >=4  ) " class="p-error">Valor menor o igual a 3.</small>
    </div>

    <div class="p-field p-col-12 p-md-6">
      <label>T√çTULO DE CUARTO NIVEL (2)</label>
      <input id="cuarto" type="number" required formControlName="title_fourth_level" placeholder="De 0 a 2 puntos"
        pInputText>
      
      <small *ngIf="(credits.get('title_fourth_level').value >=3  ) " class="p-error">Valor menor o igual a 2.</small>
    </div>
    <div class="p-field p-col-12 p-md-6">
      <label>MIEMBRO DE OCS (3)</label>
      <input id="ocs" type="number" required formControlName="OCS_member" placeholder="De 0 a 3 puntos" pInputText>
      
      <small *ngIf="(credits.get('OCS_member').value >=4 ) " class="p-error">Valor menor o igual a 3.</small>
    </div>
    <div class="p-field p-col-12 p-md-6">
      <label>PROCESOS GOBERNANTES (coord. academica, coord, administrativa) [5]</label>
      <input id="proGob" type="number" required formControlName="governing_processes" placeholder="De 0 a 5 puntos"
        pInputText>
      
      <small *ngIf="(credits.get('governing_processes').value >=6 ) " class="p-error">Valor menor o igual a 5.</small>
    </div>
    <div class="p-field p-col-12 p-md-6">
      <label>PROCESO SUSTANTIVOS (coordinadores ) [4]</label>
      <input id="sustantivos" type="number" required formControlName="process_nouns" placeholder="De 0 a 4 puntos"
        pInputText>
      
      <small *ngIf="(credits.get('process_nouns').value >=5  ) " class="p-error">Valor menor o igual a 4.</small>
    </div>
    <div class="p-field p-col-12 p-md-6">
      <label>PROCESOS DE APOYO(unidades) [3]</label>
      <input id="apoyo" type="number" formControlName="support_processes" placeholder="De 1 a 3 puntos" pInputText>
      
      <small *ngIf="(credits.get('support_processes').value >=4) " class="p-error">Valor menor o igual a 3 </small>
    </div>

    <div class="p-field  p-md-12">

      <h2 class="p-text-center" formControlName="total"> Total de Puntos : {{total}} </h2>
    </div>
       
      </div>
  </form>

  </div>

  <p-messages></p-messages>

  <ng-template pTemplate="footer">
    <p-button icon="pi pi-check" (click)="addCredits(teacher.id)" label="Total" class="p-m-2 p-button-success">
    </p-button>
  </ng-template>


</p-dialog>





<div class="p-grid">
  <div class="p-col-12 p-md-6 p-lg-8">
    <h3 class="p-text-justify p-m-4">Creditos Extra</h3>
  </div>

  <div class="p-col-12 p-md-6 p-lg-4" style="position: relative; left: auto;">
    <button class="p-m-2 p-button-success" (click)="showModalDialog()" icon="pi pi-plus" pButton type="button"
      label="Creditos Extra"></button>

  </div>

</div>

<div class="p-col-12 p-md-6 p-lg-12">
  <p-messages></p-messages>
</div>

<div style="height: 400px; overflow-x:auto;">

  <table>
    <tr>
      <th style="width: 350px; text-align: center; ">Docentes</th>

      <th>Diploma Yavirac</th>
      <th>Titulo de Cuarto Nivel</th>
      <th>Miembro de OCS</th>
      <th>Procesos Gobernantes (coord. academica, coord, administrativa) </th>
      <th>Proceso Sustantivos (coordinadores)</th>
      <th>Procesos de Apoyo(unidades)</th>
      <th>Total</th>
      <th style="width: 150px ;">Funciones</th>


    </tr>

    <tr *ngFor="let items of extraCredits">
      <td title="{{items.name}}"> {{items.name}} </td>
      <td title="{{items.name}}"> {{items.diploma_yavirac}} </td>
      <td title="{{items.name}}"> {{items.title_fourth_level}} </td>
      <td title="{{items.name}}"> {{items.OCS_member}} </td>
      <td title="{{items.name}}"> {{items.governing_processes}} </td>
      <td title="{{items.name}}"> {{items.process_nouns}} </td>
      <td title="{{items.name}}"> {{items.support_processes}} </td>
      <td title="{{items.name}}"> {{items.total}} </td>
      <td title="{{items.name}}">

        <a pButton style="margin-left: 5px;" class="p-button-warning" (click)="selectUpdate(items.id)"
          icon="pi pi-user-edit"></a>
        <a pButton title="eliminar" (click)="deleteCredit(items.id)" style="margin-left: 5px;" class="p-button-danger"
          icon="pi pi-trash"></a>


      </td>
    </tr>

  </table>
  <p-scrollTop target="parent"></p-scrollTop>
</div>

<p-confirmDialog #cd [style]="{width: '50vw'}">
  <ng-template pTemplate="header">
    <h3> Confirmar Accion</h3>
  </ng-template>
  <ng-template pTemplate="footer">
    <button type="button" pButton icon="pi pi-times" label="No" (click)="cd.reject()"></button>
    <button type="button" pButton icon="pi pi-check" label="Yes" (click)="cd.accept(); getCheckSelect()"></button>
  </ng-template>
</p-confirmDialog>